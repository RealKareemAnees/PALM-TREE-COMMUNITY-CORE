{
  "version": 3,
  "sources": ["../../../../handlers/handleRead/functions/getFileStream.ts"],
  "sourcesContent": ["import * as tcp from \"net\";\nimport { NextFunction, Request, Response } from \"express\";\n\nasync function getFileStream(\n  socket: tcp.Socket,\n  res: Response,\n  next: NextFunction\n) {\n  socket.on(\"data\", (data) => {\n    if (!res.write(data)) {\n      socket.pause();\n    }\n  });\n\n  res.on(\"drain\", () => {\n    socket.resume();\n  });\n\n  socket.on(\"end\", () => {\n    console.log(\"socket ent from reader\");\n    res.end();\n  });\n\n  socket.on(\"error\", (error) => {\n    console.error(\"Socket error:\", error);\n    next(error);\n  });\n\n  res.on(\"error\", (error) => {\n    socket.destroy();\n    next(error);\n  });\n\n  res.on(\"close\", () => {\n    console.log(\"Response closed by the client, destroying socket\");\n    socket.destroy();\n    console.log(\"socket has bet destroyed \");\n  });\n}\n\nexport { getFileStream };\n"],
  "mappings": ";;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA,eAAe,cACb,QACA,KACA,MACA;AACA,SAAO,GAAG,QAAQ,CAAC,SAAS;AAC1B,QAAI,CAAC,IAAI,MAAM,IAAI,GAAG;AACpB,aAAO,MAAM;AAAA,IACf;AAAA,EACF,CAAC;AAED,MAAI,GAAG,SAAS,MAAM;AACpB,WAAO,OAAO;AAAA,EAChB,CAAC;AAED,SAAO,GAAG,OAAO,MAAM;AACrB,YAAQ,IAAI,wBAAwB;AACpC,QAAI,IAAI;AAAA,EACV,CAAC;AAED,SAAO,GAAG,SAAS,CAAC,UAAU;AAC5B,YAAQ,MAAM,iBAAiB,KAAK;AACpC,SAAK,KAAK;AAAA,EACZ,CAAC;AAED,MAAI,GAAG,SAAS,CAAC,UAAU;AACzB,WAAO,QAAQ;AACf,SAAK,KAAK;AAAA,EACZ,CAAC;AAED,MAAI,GAAG,SAAS,MAAM;AACpB,YAAQ,IAAI,kDAAkD;AAC9D,WAAO,QAAQ;AACf,YAAQ,IAAI,2BAA2B;AAAA,EACzC,CAAC;AACH;",
  "names": []
}
